# G-guid Authentication

## Процесс jwt-auth в приложении G-guid

#### OAuth2PasswordBearer
```python
oauth2_scheme = OAuth2PasswordBearer(tokenUrl="token")

@app.get("/items/")
async def read_items(token: Annotated[str, Depends(oauth2_scheme)]):
    return {"token": token}
```

Определяя `oauth2_scheme` и указывая в зависимостях любого эндпоинта происходит декларация того, что `tokenUrl="token"`
будет использоваться для получения токена к запрашиваемому URL. Сам URL станет требовать юзер аутентификации и будет ожидать
header `Authorization: Bearer <token>`. Если в запросе не будет данного токена - запрос автоматически получит 401 UNAUTHORIZED.

Другими словами, определяя данную "Dependency" мы указываем, что запрос на текущий эндпоинт будет проверяться на соответсвующее `headers` с токеном авторизации.
и если данный токен есть он присваивается как аргумент для дальнейшего взаимодействия с ним, например для извлечения `username` или `user_id`.
Нет необходимости проверять есть ли данный токен в заголовках или нет, можно быть уверенным, что если его нет - будет 401 ошибка.

***
